# DRAW TO DO

## SELECT MAGIC-WAND MODE
- Add right click on select tool to enter magic wand mode
- Status bar says "Click to select a color"
- Uses contiguous selection
- Creates selection outline not rectangle
- Can use DEL, or CTRL+E when this mode is active to make selection transparent

## `DRAW.cfg`
- [x] Add DEFAULT_LAYER_BG_COLOR
- [x] Add DEFAULT_TOOL
- [x] Add DEFAULT_FG (existing: PALETTE_DEFAULT_FG_COLOR_INDEX)
- [x] Add DEFAULT_BG (existing: PALETTE_DEFAULT_BG_COLOR_INDEX)
- [x] Add DEFAULT_BRUSH_SIZE
- [x] Add DEFAULT_SAVE_DIR
- [x] Add DEFAULT_OPEN_DIR

## DOT/BRUSH
- [x] Make brush cursor size multiply with zoom level

## DOT
- Change arrow cursor outline color to white, with black outline
- Keep arrow cursor color showing FG chip
- [x] Make F6 PP GUI_UPDATE_REFRESH

## BRUSH
- Create toolbox button
- Add toolbox icon - swap with DOT
- [x] Make brush resize GUI_UPDATE_REFRESH

## PALETTE MENU
- [x] Make clicking off of it anywhere not on menu, close it
- [x] Mousewheel up/down over palette menu while closed is scrolling palette strip

## MARQUEE
- [x] Make nudge hot keys work one at a time, not repeat. Flying across canvas.
- [x] Add hover color for anchor points when mouse over

## MOVE
- [x] Does not work with layers - make it work with layers
- [x] If no marquee selection, move entire layer with move tool
- [x] Allow hotkeys for this too, nudge, etc. 
- [x] Commit move when switching layers or clicking elsewhere
- [x] Re-enable move on canvas click after commit
- [x] Create move mouse pointer 

## CUSTOM BRUSH
- [x] Does not work with layers - make it work with layers 

## PAN
- [x] When holding SPACE should show pan mouse pointer - not wait until click while SPACE held
- [x] If in any place where text input is used, SPACE should be ignored for PAN:
  - [x] Text tool actively typing/drawing
  - [x] Renaming layer dialog
  - [x] Saving/open dialog

## CLEAR CANVAS
- [x] Make sure it works with layers

## FILL
- [x] Is not working properly with layers - it is filling the subject, 
  but the OUTSIDE area becomes pure black - it's not even bg color
- [x] Fill works fine on Background layer (the default one)

## UNDO - LAYERS
- [x] When undoing it's clearing using background color not transparency this seems
  related to the FILL issue with layers.
- [x] Undo works fine on Background layer (the default one)
- [x] UNDO should handle also workspace updates:
  - Creating layers - Undo would be remove layer
  - Renaming layers - Undo would be use old name
  - Arranging layers - Undo would be update layer stack to previous
  - Moving them, etc. - Undo would be move back to previous position

## TEXT
- [x] Not honoring canvas zoom. When zoomed in, typing, shows small text
  - When done shows zoomed multiplied size (good)
  - Just need to make it work while typing...
- [x] Cursor position while text tool active also not honoring canvas zoom percent
  - Shows cursor at right position, but text at small size.

## RECT + RECT FILLED
- [x] While drawing preview, not showing at proper canvas zoom

## ELLIPSE + ELLIPSE FILLED
- [x] While drawing preview, not showing at proper canvas zoom

## SAVE
- [x] Not saving merged file, only active layer

## OPEN
- [x] Failing to load PNG

## IMAGE IMPORT
- [x] When importing images with right click, the final import uses black bg
  - [x] Should be transparent except for imported pixels

- [x] Cannot see help/guidance like before when zoomed in 
  - This is because it is drawn UNDER the canvas... it's hidden when zoomed in.
  - Needs to be drawn OVER status bar area, not under canvas
- [x] When moved, need to make status for help flush left, extend background

## WHEEL ZOOM
- [x] Should not be able to zoom canvas unless mousewheel is actively over canvas
  - Not when over toolbox
  - Not when over color strip
  - Not when over status
  - Not when over layer panel
  - Not when over palette menu (open or closed)
- [x] The bug is when the canvas is zoomed in, the wheel is not being actively
  blocked/prevented to canvas zoom even when over GUI elements. When zoomed at
  100% or less, the blocking works, unless the canvas is panned to overlap with
  GUI elements above it 
- [x] Zoom with wheel should also allow zooming when over the zoomed out apron area
  around the canvas, when it is gray area, and not canvas drawing.

## COLOR STRIP
- [x] When mousewheel over color strip should scroll - needs GUI_HAS_UPDATE

## LAYERS PANEL
- Create icon for eye/visible
- Create icon for opacity lock
- [x] Opacity lock isn't working - I can draw on transparency - supposed to act like mask
  [x] draw only on non-transparent stuff.
- [x] Drag and drop to rearrange layers
  - [x] Drop target indicator (line above/below)
  - [x] Auto-scroll when at panel edges
  - [x] Drag cursor shows layer preview
  - [x] ESC cancels drag
  - [x] Canvas doesn't update until drop completes
- [x] Layer operations should be undoable 
  - Merge visible, not undoable

## ADD COMMAND HELP
- [x] Hotkey ?
  - [x] Show hotkey quick reference
  - [x] Search, fuzzy, find commands, show hotkeys

